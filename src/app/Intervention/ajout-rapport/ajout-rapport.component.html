<div class="rapport-container">
  <h2>Ajouter un rapport pour l'intervention </h2>
  
  <form [formGroup]="rapportForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="details">Détails de l'intervention</label>
      <textarea id="details" formControlName="details" class="form-control" rows="5"></textarea>
      <div *ngIf="rapportForm.get('details')?.invalid && rapportForm.get('details')?.touched" class="error-message">
        Les détails sont obligatoires (min. 10 caractères)
      </div>
    </div>

    <div class="form-group">
      <label for="cout">Coût de l'intervention (€)</label>
      <input type="number" id="cout" formControlName="coutIntervention" class="form-control" step="0.01">
      <div *ngIf="rapportForm.get('coutIntervention')?.invalid && rapportForm.get('coutIntervention')?.touched" class="error-message">
        Le coût doit être un nombre positif
      </div>
    </div>

    <div class="form-group">
      <label for="satisfaction">Niveau de satisfaction (1-5)</label>
      <div class="rating">
        <span *ngFor="let star of [1,2,3,4,5]" 
              (click)="rapportForm.get('satisfaction')?.setValue(star)"
              [class.active]="star <= rapportForm.get('satisfaction')?.value">
          ★
        </span>
      </div>
      <input type="hidden" formControlName="satisfaction">
    </div>

    <button type="submit" [disabled]="rapportForm.invalid" class="btn-submit">
      Enregistrer le rapport
    </button>
  </form>
</div>